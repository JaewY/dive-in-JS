# 13장 스코프
<br>
<br>
<br>

## 13-1 스코프란?

<br>
스코프는 모든 프로그래밍 언어의 기본적인 개념이며 이를 이해하지 못하면 다른 개념을 이해하는 데 어려움을 겪을 수 있다. 자바스크립트의 스코프는 다른 언어와의 차이점이 있으므로 주의가 필요하다. 또한 var 변수와 let, const 변수는 다르게 동작한다.

스코프는 식별자가 유효한 범위를 말하며, 즉 모든 식별자가 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정된다.

예를 들자면

```
const x = 1
const arrow = () => {
    const x = 10
    return x
}
```

위 코드에서 가장 바깥에 있는 변수 x와 arrow함수 안에 있는 변수 x는 같은 이름이지만 다른 스코프를 가지고 있다.
1이 할당된 x변수는 전역 변수이고, 10이 할당된 x변수는 arrow함수 내에서만 유효하다.

---

<br>
<br>
<br>

## 13-2 스코프의 종류

<br>
|구분|설명|스코프|변수|
|:-:|:-:|:-:|:-:|
|전역|코드의 가장 바깥 영역|전역 스코프|전역변수|
|지역|함수의 몸체 내부|지역 스코프|지역 변수|

변수는 자신의 지역 스코프와 하위 지역 스코프 안에서 유효하다.
전역 변수는 모든 지역 스코프 안에서 유효하고, 지역 변수는 자신의 스코프와 하위 스코프 내에서만 유효함

---


<br>
<br>
<br>

## 13-3 스코프 체인

<br>
함수는 중첩될 수 있으므로 함수의 지역 스코프도 중첩될 수 있으며 이는 스코프가 함수의 중첩에 의해 계층적인 구조를 가질 수 있다는 것을 의미한다. 이를 스코프 체인이라고 한다.

변수를 참조할 때 자바스크립트 엔진은 스코프 체인을 통해 변수를 참조하는 코드의 스코프에서 시작하여 상위 스코프 방향으로 이동하며 선언된 변수를 검색한다.

또한 상위 스코프에서 선언한 변수는 하위 스코프에서 자유롭게 참조할 수 있지만, 하위 스코프에서 유효한 변수를 상위 스코프에서 참조할 수는 없다.

```
const outer = () => {
    const x = 10
    console.log(y) // undefined
    const inner = () => {
        const y = 20
        console.log(x) // 10 출력
    }
}
```


---


<br>
<br>
<br>

## 13-4 함수 레벨 스코프

<br>
대부분의 프로그래밍 언어는 함수레벨 스코프가 아닌 블록레벨 스코프를 지원하며, var 변수만이 함수 레벨 스코프를 사용해 왔었다. 이는 호이스팅 등의 문제가 빈번히 발생하여, ES6부터는 let, const 변수가 등장했는데, 이는 함수 레벨 스코프가 아닌 if, for문 등에도 지원하는 블록 레벨 스코프를 지원한다.


---


<br>
<br>
<br>

## 13-5 렉시컬 스코프
<br>

```
var x = 1
function foo() {
    var x = 10
    bar()
}

function bar() {
    console.log(x)
}

foo() // 1
bar() // 1
```

자바스크립트는 렉시컬 스코프를 따르므로 함수의 호출 위치가 아니라 어디서 정의했는지에 따라 상위 스코프를 결정한다.

---


<br>
<br>
<br>